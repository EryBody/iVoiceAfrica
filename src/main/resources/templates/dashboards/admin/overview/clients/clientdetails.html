<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">
<!DOCTYPE html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet"
	href="../../../../assets/CSS/styles-admin/admingeneral.css" />
<link rel="stylesheet"
	href="../../../../assets/CSS/styles-admin/adminhome.css" />
<link rel="stylesheet"
	href="../../../../assets/CSS/styles-admin/client.css" />
<link rel="stylesheet"
	href="../../../../assets/CSS/styles-admin/freelancers.css" />
<link rel="shortcut icon" sizes="32x32"
	href="../../../../assets/icons/fav.png" type="image/x-icon" />
<meta name="description"
	content="We are a translation and localization company that provides expertise in brand identity and language solutions for businesses worldwide." />

<script defer src="../../../../assets/JS/js/admin.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Open+Sans:wght@500;600;700&display=swap"
	rel="stylesheet" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Open+Sans:wght@500;600;700&display=swap"
	rel="stylesheet" />
<link rel="stylesheet"
	href="./../../../assets/bootstrap/dist/css/bootstrap.css" />
<title>Admin - Freelancer</title>
</head>

<body>
	<div class="admin-overview">

		<!-- ADMIN SIDE NAVIGATION -->
		<div th:replace="fragments/main_sidenav_admin :: sidenav_admin"></div>
		<!-- ///// -->

		<!-- ADMIN MAIN SECTION -->
		<div class="admin-main">
			<div class="admin-overlay"></div>

			<div class="admin-header">
				<div class="admin-cta">
					<button class="menu-btn">
						<span class="material-symbols-outlined"> menu </span>
					</button>
					<h1 class="admin-heading">Clients</h1>
				</div>
			</div>

			<div th:replace="fragments/admin_user :: admin-user-header"></div>

			<div class="admin-contentbox">
				<div class="client-box">
					<a th:href="@{/admin-client}" class="arr-back"> <img
						src="../../../../assets/images/admin-imgs/lessthan.svg"
						alt="less than arrow" />
					</a>

					<!-- display details of controller -->
					<p th:text="${message}" th:if="${message ne null}"
						class="alert alert-primary m-3"></p>

					<div class="adminUtil-user-header">
						<img src="../../../../assets/images/admin-imgs/remi.svg"
							alt="A picture of femi" />

						<div class="adminUtil-user-details">
							<h1>
								Client ID: <span th:text="${opUser.userId}"></span>
							</h1>
							<span th:text="|${opUser.firstName} ${opUser.lastName}|">Remi
								Martin</span>
							<p>
								Account Status: <span
									th:text="${opUser.userStatus.userStatus} ?: '-'"></span>
							</p>
						</div>

						<div class="adminUtil-user-cta">
							<a
								th:href="@{/block-client-user/{user}(user=${opUser.username})}"><button
									type="button">
									<span> Block</span> <img
										src="../../../../assets/images/admin-imgs/cancel.svg"
										alt="
               						 cancel" />
								</button></a> <a
								th:href="@{/activate-client-user/{user}(user=${opUser.username})}"><button
									type="button">
									<span> Activate</span> <img
										src="../../../../assets/images/admin-imgs/halt.svg"
										alt="Activate" />
								</button></a>
						</div>
					</div>
					<div class="adminUtil-user-menu">
						<span class="active-freelancer" id="details">Details</span> <span
							id="jobs">Jobs</span> <span id="transactions">Job delivery</span>
					</div>

					<!-- DETAILS CLIENTS -->
					<div class="clientdetailsbox">
						<div class="adminUtil-info">
							<div class="info-header">
								<h2>Basic Information</h2>
							</div>

							<div class="info">
								<span class="info-title">ID</span>
								<p th:text="${opUser.userId} ?: '-'">006456725</p>
							</div>
							<div class="info">
								<span class="info-title">Username</span>
								<p th:text="${opUser.username} ?: '-'">Remi</p>
							</div>
							<div class="info">
								<span class="info-title">First name</span>
								<p th:text="${opUser.firstName} ?: '-'">Remi</p>
							</div>
							<div class="info">
								<span class="info-title">Last name</span>
								<p th:text="${opUser.firstName} ?: '-'">Martin</p>
							</div>
							<div class="info">
								<span class="info-title">Middle name</span>
								<p
									th:text="${opUser.middleName.isEmpty()} ? '-' : ${opUser.middleName}">Martin</p>
							</div>
							<div class="info">
								<span class="info-title">Nationality</span>
								<p th:text="${opUser.nationality} ?: '-'">Nigeria</p>
							</div>
							<div class="info">
								<span class="info-title">Sex</span>
								<p th:text="${opUser.gender} ?: '-'">Male</p>
							</div>
							<div class="info">
								<span class="info-title">Phone number</span>
								<p class="green" th:text="${opUser.phone} ?: '-'">+233 903
									918 7653</p>
							</div>
							<div class="info">
								<span class="info-title">Email</span>
								<p class="green" th:text="${opUser.emailAddress} ?: '-'">remimartin@gmail.com</p>
							</div>
							<div class="info">
								<span class="info-title">Postal code</span>
								<p th:text="${opUser.postalCode} ?: '-'">004875</p>
							</div>

							<div class="info">
								<span class="info-title">User Status</span>
								<p th:text="${opUser.userStatus.userStatus} ?: '-'">Pending</p>
							</div>

							<div class="info">
								<span class="info-title">Country of <br /> residence
								</span>
								<p th:text="${opUser.country} ?: '-'">Nigeria</p>
							</div>
							<div class="info">
								<span class="info-title">Created Date</span>
								<p th:text="${opUser.createdDate} ?: '-'">created date</p>
							</div>
						</div>
					</div>
					<!-- ///// -->

					<!-- JOBS CLIENTS -->
					<div class="clientsjobsbox">
						<div class="info-header">
							<h2>Job summary</h2>
						</div>
						<div class="info">
							<span class="info-title">Active Job(s)</span>
							<p th:text="${inprogressTotalNumber}">2</p>
						</div>
						<div class="info">
							<span class="info-title">Completed Job(s)</span>
							<p th:text="${completedTotalNumber}">7</p>
						</div>
						<div class="info">
							<span class="info-title">Finished Job(s)</span>
							<p th:text="${finishedTotalNumber}">2</p>
						</div>
						<div class="info random-m">
							<span class="info-title">All request(s)</span>
							<p th:text="${allJobRequest.size()}">40</p>
						</div>
						<div class="info-header">
							<h2>Work Activity</h2>
						</div>

						<div class="jobs-cta">

							<div class="jobs-cta-header">
								<p class="light-text">Filter by:</p>

								 <div class="filter-option">
									<span>Service type</span> 
									<select name="select" id="job"
										class="option-all"
										onchange="javascript:handleServiceTypeStatusSelect(this)">
										<option value="">Please select status</option>
										<option th:each="serviceType : ${serviceTypes}"
											th:value="|${serviceType.typeId}-${opUser.username}|"
											th:text="${serviceType.typeName}" />

									</select> <img src="../../../../assets/images/admin-imgs/drpdown.svg"
										class="dropdown-icon" alt="dropdown" />
								</div>

								<div class="filter-option">
									<span>Job Status</span> <select name="select" id="job"
										class="option-all"
										onchange="javascript:handleWorkStatusSelect(this)">
										<option value="">Please select status</option>
										<option th:each="deliveryStatus : ${workOrderStatus}"
											th:value="|${deliveryStatus.woStatusId}-${opUser.username}|"
											th:text="${deliveryStatus.status}" />

									</select> <img src="../../../../assets/images/admin-imgs/drpdown.svg"
										class="dropdown-icon" alt="dropdown" />
								</div>


							</div>

							<form th:action="@{/client-details-search}"
								th:object="${SearchDTO}" method="post">
								
								<div class="job-search">
									<label class="light-text" id="job-search">Search:</label> 
									<input
										type="hidden" name="userId" th:value="${opUser.username}" />

									<div class="search">
										<img src="../../../../assets/images/admin-imgs/li.svg"
											alt="search icon" /> <input type="text" name="workOrderId"
											id="job-search" placeholder="Search Job ID" />
									</div>
									
									<button type="submit" class="btn btn-outline-secondary">Search</button>
								</div>
								
								
								
							</form>

							<div class="util-cta-table">
								<table id="cta-table">
									<thead>
										<tr>
											<th>S/N</th>
											<th>Job ID</th>
											<th>Work Title</th>
											<th>Service type</th>
											<th>User</th>
											<th>Min amount</th>
											<th>Max amount</th>
											<th>Job status</th>
											<th>Payment Status</th>
											<th>Details</th>
											<th>Modified date</th>
											<th>Posting date</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="temp, iStat : ${allJobRequest}">
											<td th:text="${iStat.index+1}">1</td>
											<td><a
												th:href="@{/job-details/{workId}/{workOrderStatus}(workId=${temp.workId}, workOrderStatus=${temp.workOrderStatus.woStatusId})}"
												class="table-link"> <span th:text="${temp.workId}">temi.admin</span>
											</a></td>
											<td th:text="${temp.workTitle}">Interpretation</td>
											<td th:text="${temp.serviceType.typeName}">New</td>
											<td th:text="${temp.user.username}">-</td>
											<td th:text="${temp.minAmount}">00032356679849</td>
											<td th:text="${temp.maxAmount}">-</td>
											<td th:text="${temp.workOrderStatus.status}">-</td>
											<td th:text="${temp.workOrderStatus.status}">-</td>
											<td th:text="${temp.description}">-</td>
											<td th:text="${temp.modifiedDate}">-</td>
											<td th:text="${temp.postingDate}">-</td>
										</tr>

									</tbody>
								</table>
							</div>

						</div>
					</div>

					<!-- TRANSACTIONS -->
					<div id="transactions" class="client-transaction-box">
						<div class="info-header">
							<h2>Delivery Summary</h2>
						</div>
						<div class="info">
							<span class="info-title">Active Jobs</span>
							<p th:text="${clientWorkDelivery.activeDelivery}">2</p>
						</div>
						<div class="info">
							<span class="info-title">Completed Jobs</span>
							<p th:text="${clientWorkDelivery.activeDelivery}">30</p>
						</div>
						<div class="info">
							<span class="info-title">Finished Jobs </span>
							<p th:text="${clientWorkDelivery.activeDelivery}">2</p>
						</div>
						<div class="info random-m">
							<span class="info-title">Sent proposals</span>
							<p th:text="${clientWorkDelivery.clientProposals}">40</p>
						</div>

						<div class="info-header">
							<h2>Delivery Activity</h2>
						</div>


						<div class="jobs-cta-header">
							<p class="light-text">Filter by:</p>
							<!-- <div class="filter-option">
								<span>Service type</span> <select name="select" id="job"
									class="option-all">
									<option value="all">All</option>
									<option value="all">All</option>
									<option value="all">All</option>
								</select> <img src="../../../../assets/images/admin-imgs/drpdown.svg"
									class="dropdown-icon" alt="dropdown" />
							</div> -->

							<div class="filter-option">
									<span>Job Status</span> <select name="select" id="job"
										class="option-all"
										onchange="javascript:handleDeliveryStatusSelect(this)">
										<option value="">Please select status</option>
										<option th:each="deliveryStatus : ${deliveryStatus}"
											th:value="|${deliveryStatus.deliveryStatusId}-${opUser.username}|"
											th:text="${deliveryStatus.status}" />

									</select> <img src="../../../../assets/images/admin-imgs/drpdown.svg"
										class="dropdown-icon" alt="dropdown" />
								</div>
						</div>

						<form th:action="@{/client-delivery-search}"
								th:object="${SearchDTO}" method="post">
								
								<div class="job-search">
									<label class="light-text" id="job-search">Search:</label> 
									<input
										type="hidden" name="userId" th:value="${opUser.username}" />

									<div class="search">
										<img src="../../../../assets/images/admin-imgs/li.svg"
											alt="search icon" /> <input type="text" name="workOrderId"
											id="job-search" placeholder="Search Job ID" />
									</div>
									
									<button type="submit" class="btn btn-outline-secondary">Search</button>
								</div>
							</form>
						
						<div class="util-cta-table">
							<table id="cta-table">
								<thead>
									<tr>
										<th>S/N</th>
										<th>Delivery ID</th>
										<th>Job ID</th>
										<th>Freelancer</th>
										<th>Amount</th>
										<th>Delivery Status</th>
										<th>Payment Status</th>
										<th>Start Date</th>
										<th>End Date</th>
										<th>Completed Date</th>
										<th>Created Date</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="temp, iStat : ${workOrderDeliveries}">
										<td th:text="${iStat.index+1}">1</td>
										<td class="id" th:text="${temp.deliveryId}">00032356679849</td>
										<td th:text="${temp.workOrder.workId}">Translation</td>
										<td th:text="|${temp.user.firstName} ${temp.user.lastName}|">In
											progress</td>
										<td th:text="${temp.amount}">In Escrow</td>
										<td class="green" th:text="${temp.deliveryStatus.status}">00032356679849</td>
										<td th:text="${temp.deliveryStatus.status}">$700</td>
										<td th:text="${temp.startDate}">2 March 2021, 4:18pm</td>
										<td th:text="${temp.endDate}">2 March 2021, 4:18pm</td>
										<td th:text="${temp.completedDate}">28 September 2021,
											9:23PM</td>
										<td th:text="${temp.createdDate}">In Review</td>
									</tr>

								</tbody>
							</table>
						</div>
					</div>


				</div>
			</div>
		</div>
	</div>

	<!-- jquery latest version -->
	<script src="../../../../assets/JS/js/vendor/jquery-2.2.4.min.js"></script>
	<script src="../../../../assets/JS/js/jquery.slimscroll.min.js"></script>
	<script src="../../../../assets/JS/js/jquery.slicknav.min.js"></script>

	<script type="text/javascript">
		function handleWorkStatusSelect(elm) {

			var action = "/client-details-by-type";

			var concatString = elm.value.split("-");

			var status = concatString[0];
			var opUser = concatString[1];

			$.ajax({
				url : action,
				type : "GET",
				data : {
					statusId : status,
					userId : opUser
				},
				success : function(data) {
					window.location.href = data;
				}
			});
		}
		
		function handleServiceTypeStatusSelect(elm) {

			var action = "/client-details-by-servicetype";

			var concatString = elm.value.split("-");

			var serviceType = concatString[0];
			var opUser = concatString[1];

			$.ajax({
				url : action,
				type : "GET",
				data : {
					serviceType : serviceType,
					userId : opUser
				},
				success : function(data) {
					window.location.href = data;
				}
			});
		}
		
		function handleDeliveryStatusSelect(elm) {

			var action = "/client-details-by-deliverytype";

			var concatString = elm.value.split("-");

			var status = concatString[0];
			var opUser = concatString[1];

			$.ajax({
				url : action,
				type : "GET",
				data : {
					statusId : status,
					userId : opUser
				},
				success : function(data) {
					window.location.href = data;
				}
			});
		}
	</script>

</body>
</html>
